{"ast":null,"code":"var _jsxFileName = \"D:\\\\UohDating\\\\university-dating-app\\\\frontend\\\\src\\\\components\\\\Messages.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport io from 'socket.io-client';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Messages = () => {\n  _s();\n  var _selectedMatch$userId;\n  const {\n    userId\n  } = useParams();\n  const [matches, setMatches] = useState([]);\n  const [selectedMatch, setSelectedMatch] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [socket, setSocket] = useState(null);\n  const [currentUser, setCurrentUser] = useState(null);\n  const [showSidebar, setShowSidebar] = useState(true);\n  useEffect(() => {\n    const user = JSON.parse(localStorage.getItem('user') || '{}');\n    setCurrentUser(user);\n\n    // Initialize socket connection\n    const newSocket = io('http://localhost:5000');\n    setSocket(newSocket);\n    newSocket.emit('join', user.id);\n    newSocket.on('receive_message', message => {\n      setMessages(prev => [...prev, message]);\n    });\n    fetchMatches();\n    return () => newSocket.close();\n  }, []);\n  useEffect(() => {\n    if (userId && matches.length > 0) {\n      const match = matches.find(m => m.userId._id === userId);\n      if (match) {\n        setSelectedMatch(match);\n        fetchMessages(userId);\n        // Hide sidebar on mobile when a match is selected\n        if (window.innerWidth < 768) {\n          setShowSidebar(false);\n        }\n      }\n    }\n  }, [userId, matches]);\n  const fetchMatches = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.get('http://localhost:5000/api/user/matches', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setMatches(response.data);\n      setLoading(false);\n    } catch (error) {\n      console.error('Matches fetch error:', error);\n      setLoading(false);\n    }\n  };\n  const fetchMessages = async otherUserId => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.get(`http://localhost:5000/api/messages/${otherUserId}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setMessages(response.data);\n    } catch (error) {\n      var _error$response;\n      console.error('Messages fetch error:', error);\n      if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 403) {\n        alert('You can only message matched users');\n      }\n    }\n  };\n  const sendMessage = async e => {\n    e.preventDefault();\n    if (!newMessage.trim() || !selectedMatch) return;\n    try {\n      const token = localStorage.getItem('token');\n      const messageData = {\n        receiverId: selectedMatch.userId._id,\n        content: newMessage.trim(),\n        messageType: 'text'\n      };\n      const response = await axios.post('http://localhost:5000/api/messages', messageData, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setMessages(prev => [...prev, response.data]);\n\n      // Emit to socket for real-time\n      socket.emit('send_message', {\n        ...response.data,\n        receiverId: selectedMatch.userId._id\n      });\n      setNewMessage('');\n    } catch (error) {\n      var _error$response2;\n      console.error('Send message error:', error);\n      if (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) === 403) {\n        alert('You can only message matched users');\n      } else {\n        alert('Failed to send message');\n      }\n    }\n  };\n  const handleSelectMatch = match => {\n    setSelectedMatch(match);\n    fetchMessages(match.userId._id);\n    window.history.pushState(null, '', `/messages/${match.userId._id}`);\n    // Hide sidebar on mobile when a match is selected\n    if (window.innerWidth < 768) {\n      setShowSidebar(false);\n    }\n  };\n  const handleBackToMatches = () => {\n    setShowSidebar(true);\n    setSelectedMatch(null);\n    window.history.pushState(null, '', '/messages');\n  };\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    window.location.href = '/';\n  };\n\n  // Navigation Header Component\n  const NavigationHeader = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex items-center justify-between p-4 bg-gradient-to-r from-blue-500 to-purple-500\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center space-x-3\",\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg sm:text-xl font-bold text-white\",\n        children: \"Messages\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center space-x-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => window.location.href = '/dashboard',\n        className: \"flex items-center space-x-1 px-2 sm:px-3 py-1 text-xs sm:text-sm text-white border border-white rounded hover:bg-white hover:text-blue-500 transition duration-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\uD83C\\uDFE0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"hidden sm:inline\",\n          children: \"Dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => window.location.href = '/matches',\n        className: \"flex items-center space-x-1 px-2 sm:px-3 py-1 text-xs sm:text-sm text-white border border-white rounded hover:bg-white hover:text-blue-500 transition duration-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\uD83D\\uDC95\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"hidden sm:inline\",\n          children: \"Matches\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => window.location.href = '/profile',\n        className: \"flex items-center space-x-1 px-2 sm:px-3 py-1 text-xs sm:text-sm text-white border border-white rounded hover:bg-white hover:text-blue-500 transition duration-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\uD83D\\uDC64\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"hidden sm:inline\",\n          children: \"Profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLogout,\n        className: \"text-white hover:text-gray-200 transition duration-200 text-xs sm:text-sm px-1\",\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 138,\n    columnNumber: 9\n  }, this);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center min-h-screen bg-gradient-to-r from-blue-400 to-purple-400\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center text-white\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-8 h-8 sm:w-12 sm:h-12 mx-auto mb-4 border-b-2 border-white rounded-full animate-spin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-lg sm:text-xl\",\n          children: \"Loading messages...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 13\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-r from-blue-400 to-purple-400\",\n    children: [/*#__PURE__*/_jsxDEV(NavigationHeader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex h-[calc(100vh-80px)]\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `${showSidebar ? 'block' : 'hidden'} md:block w-full md:w-1/3 overflow-y-auto bg-white border-r`,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4\",\n          children: matches.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"py-8 text-center text-gray-500\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-2 text-4xl\",\n              children: \"\\uD83D\\uDCAC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"No matches to message yet\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => window.location.href = '/dashboard',\n              className: \"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition duration-200\",\n              children: \"Find Matches\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-3\",\n            children: matches.map((match, index) => {\n              var _match$userId$photos$;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: () => handleSelectMatch(match),\n                className: `p-3 rounded-lg cursor-pointer transition duration-200 ${(selectedMatch === null || selectedMatch === void 0 ? void 0 : selectedMatch.userId._id) === match.userId._id ? 'bg-purple-100 border-2 border-purple-300' : 'hover:bg-gray-100'}`,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-center w-12 h-12 overflow-hidden bg-gray-200 rounded-full\",\n                    children: match.userId.photos && match.userId.photos.length > 0 ? /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: ((_match$userId$photos$ = match.userId.photos.find(p => p.isMain)) === null || _match$userId$photos$ === void 0 ? void 0 : _match$userId$photos$.url) || match.userId.photos[0].url,\n                      alt: match.userId.firstName,\n                      className: \"object-cover w-full h-full\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 222,\n                      columnNumber: 53\n                    }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-2xl\",\n                      children: \"\\uD83D\\uDC64\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 228,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 220,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex-1\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                      className: \"font-semibold\",\n                      children: [match.userId.firstName, \" \", match.userId.lastName]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 232,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm text-gray-500\",\n                      children: match.userId.major\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 235,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 231,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 41\n                }, this)\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 37\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `${!showSidebar ? 'block' : 'hidden'} md:block flex flex-col flex-1`,\n        children: selectedMatch ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center p-3 sm:p-4 space-x-3 bg-white border-b\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleBackToMatches,\n              className: \"md:hidden flex items-center justify-center w-8 h-8 text-blue-500 hover:bg-blue-50 rounded-full transition duration-200\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"w-5 h-5\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                viewBox: \"0 0 24 24\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: \"2\",\n                  d: \"M15 19l-7-7 7-7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 259,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-center w-8 h-8 sm:w-10 sm:h-10 overflow-hidden bg-gray-200 rounded-full\",\n              children: selectedMatch.userId.photos && selectedMatch.userId.photos.length > 0 ? /*#__PURE__*/_jsxDEV(\"img\", {\n                src: ((_selectedMatch$userId = selectedMatch.userId.photos.find(p => p.isMain)) === null || _selectedMatch$userId === void 0 ? void 0 : _selectedMatch$userId.url) || selectedMatch.userId.photos[0].url,\n                alt: selectedMatch.userId.firstName,\n                className: \"object-cover w-full h-full\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 41\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-lg sm:text-xl\",\n                children: \"\\uD83D\\uDC64\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-sm sm:text-lg font-semibold\",\n                children: [selectedMatch.userId.firstName, \" \", selectedMatch.userId.lastName]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 275,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs sm:text-sm text-gray-500\",\n                children: [selectedMatch.userId.major, \" \\u2022 \", selectedMatch.userId.year]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1 p-3 sm:p-4 space-y-3 sm:space-y-4 overflow-y-auto bg-gradient-to-b from-blue-50 to-purple-50\",\n            children: messages.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"py-8 text-center text-gray-700\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-4 text-4xl sm:text-6xl\",\n                children: \"\\uD83D\\uDCAC\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"mb-2 text-lg sm:text-xl font-semibold\",\n                children: \"Start the conversation!\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm sm:text-base\",\n                children: [\"You matched with \", selectedMatch.userId.firstName, \". Say hello!\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 290,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 37\n            }, this) : messages.map((message, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `flex ${message.sender._id === currentUser.id ? 'justify-end' : 'justify-start'}`,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `max-w-xs sm:max-w-sm lg:max-w-md px-3 sm:px-4 py-2 rounded-lg ${message.sender._id === currentUser.id ? 'bg-purple-500 text-white' : 'bg-white text-gray-800 shadow-md'}`,\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm sm:text-base\",\n                  children: message.content\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 305,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center justify-between mt-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: `text-xs ${message.sender._id === currentUser.id ? 'text-purple-200' : 'text-gray-500'}`,\n                    children: new Date(message.createdAt).toLocaleTimeString([], {\n                      hour: '2-digit',\n                      minute: '2-digit'\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 307,\n                    columnNumber: 53\n                  }, this), message.sender._id === currentUser.id && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `text-xs ml-2 ${message.isRead ? 'text-purple-200' : 'text-purple-300'}`,\n                    children: message.isRead ? '‚úì‚úì' : '‚úì'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 313,\n                    columnNumber: 57\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 306,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 45\n              }, this)\n            }, message._id || index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 41\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-3 sm:p-4 bg-white border-t\",\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: sendMessage,\n              className: \"flex space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: newMessage,\n                onChange: e => setNewMessage(e.target.value),\n                placeholder: `Message ${selectedMatch.userId.firstName}...`,\n                className: \"flex-1 p-2 sm:p-3 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 327,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                disabled: !newMessage.trim(),\n                className: \"px-4 sm:px-6 py-2 sm:py-3 text-sm sm:text-base text-white transition duration-200 bg-purple-500 rounded-lg hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed\",\n                children: \"Send\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 334,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-center flex-1 text-gray-700\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center p-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-4 text-6xl sm:text-8xl\",\n              children: \"\\uD83D\\uDCAC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"mb-2 text-xl sm:text-2xl font-bold\",\n              children: \"Select a match to start chatting\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm sm:text-lg\",\n              children: \"Choose someone from your matches to begin a conversation\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 186,\n    columnNumber: 9\n  }, this);\n};\n_s(Messages, \"wWvTG+pcTkQa/knKfkW2wDnio+8=\", false, function () {\n  return [useParams];\n});\n_c = Messages;\nexport default Messages;\nvar _c;\n$RefreshReg$(_c, \"Messages\");","map":{"version":3,"names":["React","useState","useEffect","useParams","axios","io","jsxDEV","_jsxDEV","Fragment","_Fragment","Messages","_s","_selectedMatch$userId","userId","matches","setMatches","selectedMatch","setSelectedMatch","messages","setMessages","newMessage","setNewMessage","loading","setLoading","socket","setSocket","currentUser","setCurrentUser","showSidebar","setShowSidebar","user","JSON","parse","localStorage","getItem","newSocket","emit","id","on","message","prev","fetchMatches","close","length","match","find","m","_id","fetchMessages","window","innerWidth","token","response","get","headers","Authorization","data","error","console","otherUserId","_error$response","status","alert","sendMessage","e","preventDefault","trim","messageData","receiverId","content","messageType","post","_error$response2","handleSelectMatch","history","pushState","handleBackToMatches","handleLogout","removeItem","location","href","NavigationHeader","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","map","index","_match$userId$photos$","photos","src","p","isMain","url","alt","firstName","lastName","major","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","year","sender","Date","createdAt","toLocaleTimeString","hour","minute","isRead","onSubmit","type","value","onChange","target","placeholder","disabled","_c","$RefreshReg$"],"sources":["D:/UohDating/university-dating-app/frontend/src/components/Messages.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport io from 'socket.io-client';\r\n\r\nconst Messages = () => {\r\n    const { userId } = useParams();\r\n    const [matches, setMatches] = useState([]);\r\n    const [selectedMatch, setSelectedMatch] = useState(null);\r\n    const [messages, setMessages] = useState([]);\r\n    const [newMessage, setNewMessage] = useState('');\r\n    const [loading, setLoading] = useState(true);\r\n    const [socket, setSocket] = useState(null);\r\n    const [currentUser, setCurrentUser] = useState(null);\r\n    const [showSidebar, setShowSidebar] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const user = JSON.parse(localStorage.getItem('user') || '{}');\r\n        setCurrentUser(user);\r\n\r\n        // Initialize socket connection\r\n        const newSocket = io('http://localhost:5000');\r\n        setSocket(newSocket);\r\n\r\n        newSocket.emit('join', user.id);\r\n\r\n        newSocket.on('receive_message', (message) => {\r\n            setMessages(prev => [...prev, message]);\r\n        });\r\n\r\n        fetchMatches();\r\n\r\n        return () => newSocket.close();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (userId && matches.length > 0) {\r\n            const match = matches.find(m => m.userId._id === userId);\r\n            if (match) {\r\n                setSelectedMatch(match);\r\n                fetchMessages(userId);\r\n                // Hide sidebar on mobile when a match is selected\r\n                if (window.innerWidth < 768) {\r\n                    setShowSidebar(false);\r\n                }\r\n            }\r\n        }\r\n    }, [userId, matches]);\r\n\r\n    const fetchMatches = async () => {\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            const response = await axios.get('http://localhost:5000/api/user/matches', {\r\n                headers: { Authorization: `Bearer ${token}` }\r\n            });\r\n            setMatches(response.data);\r\n            setLoading(false);\r\n        } catch (error) {\r\n            console.error('Matches fetch error:', error);\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const fetchMessages = async (otherUserId) => {\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            const response = await axios.get(`http://localhost:5000/api/messages/${otherUserId}`, {\r\n                headers: { Authorization: `Bearer ${token}` }\r\n            });\r\n            setMessages(response.data);\r\n        } catch (error) {\r\n            console.error('Messages fetch error:', error);\r\n            if (error.response?.status === 403) {\r\n                alert('You can only message matched users');\r\n            }\r\n        }\r\n    };\r\n\r\n    const sendMessage = async (e) => {\r\n        e.preventDefault();\r\n        if (!newMessage.trim() || !selectedMatch) return;\r\n\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            const messageData = {\r\n                receiverId: selectedMatch.userId._id,\r\n                content: newMessage.trim(),\r\n                messageType: 'text'\r\n            };\r\n\r\n            const response = await axios.post('http://localhost:5000/api/messages', messageData, {\r\n                headers: { Authorization: `Bearer ${token}` }\r\n            });\r\n\r\n            setMessages(prev => [...prev, response.data]);\r\n\r\n            // Emit to socket for real-time\r\n            socket.emit('send_message', {\r\n                ...response.data,\r\n                receiverId: selectedMatch.userId._id\r\n            });\r\n\r\n            setNewMessage('');\r\n        } catch (error) {\r\n            console.error('Send message error:', error);\r\n            if (error.response?.status === 403) {\r\n                alert('You can only message matched users');\r\n            } else {\r\n                alert('Failed to send message');\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleSelectMatch = (match) => {\r\n        setSelectedMatch(match);\r\n        fetchMessages(match.userId._id);\r\n        window.history.pushState(null, '', `/messages/${match.userId._id}`);\r\n        // Hide sidebar on mobile when a match is selected\r\n        if (window.innerWidth < 768) {\r\n            setShowSidebar(false);\r\n        }\r\n    };\r\n\r\n    const handleBackToMatches = () => {\r\n        setShowSidebar(true);\r\n        setSelectedMatch(null);\r\n        window.history.pushState(null, '', '/messages');\r\n    };\r\n\r\n    const handleLogout = () => {\r\n        localStorage.removeItem('token');\r\n        localStorage.removeItem('user');\r\n        window.location.href = '/';\r\n    };\r\n\r\n    // Navigation Header Component\r\n    const NavigationHeader = () => (\r\n        <div className=\"flex items-center justify-between p-4 bg-gradient-to-r from-blue-500 to-purple-500\">\r\n            <div className=\"flex items-center space-x-3\">\r\n                <h2 className=\"text-lg sm:text-xl font-bold text-white\">Messages</h2>\r\n            </div>\r\n            <div className=\"flex items-center space-x-2\">\r\n                <button\r\n                    onClick={() => window.location.href = '/dashboard'}\r\n                    className=\"flex items-center space-x-1 px-2 sm:px-3 py-1 text-xs sm:text-sm text-white border border-white rounded hover:bg-white hover:text-blue-500 transition duration-200\"\r\n                >\r\n                    <span>üè†</span>\r\n                    <span className=\"hidden sm:inline\">Dashboard</span>\r\n                </button>\r\n                <button\r\n                    onClick={() => window.location.href = '/matches'}\r\n                    className=\"flex items-center space-x-1 px-2 sm:px-3 py-1 text-xs sm:text-sm text-white border border-white rounded hover:bg-white hover:text-blue-500 transition duration-200\"\r\n                >\r\n                    <span>üíï</span>\r\n                    <span className=\"hidden sm:inline\">Matches</span>\r\n                </button>\r\n                <button\r\n                    onClick={() => window.location.href = '/profile'}\r\n                    className=\"flex items-center space-x-1 px-2 sm:px-3 py-1 text-xs sm:text-sm text-white border border-white rounded hover:bg-white hover:text-blue-500 transition duration-200\"\r\n                >\r\n                    <span>üë§</span>\r\n                    <span className=\"hidden sm:inline\">Profile</span>\r\n                </button>\r\n                <button\r\n                    onClick={handleLogout}\r\n                    className=\"text-white hover:text-gray-200 transition duration-200 text-xs sm:text-sm px-1\"\r\n                >\r\n                    Logout\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex items-center justify-center min-h-screen bg-gradient-to-r from-blue-400 to-purple-400\">\r\n                <div className=\"text-center text-white\">\r\n                    <div className=\"w-8 h-8 sm:w-12 sm:h-12 mx-auto mb-4 border-b-2 border-white rounded-full animate-spin\"></div>\r\n                    <p className=\"text-lg sm:text-xl\">Loading messages...</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gradient-to-r from-blue-400 to-purple-400\">\r\n            <NavigationHeader />\r\n            \r\n            <div className=\"flex h-[calc(100vh-80px)]\">\r\n                {/* Sidebar - Matches List */}\r\n                <div className={`${\r\n                    showSidebar ? 'block' : 'hidden'\r\n                } md:block w-full md:w-1/3 overflow-y-auto bg-white border-r`}>\r\n                    \r\n                    <div className=\"p-4\">\r\n                        {matches.length === 0 ? (\r\n                            <div className=\"py-8 text-center text-gray-500\">\r\n                                <div className=\"mb-2 text-4xl\">üí¨</div>\r\n                                <p>No matches to message yet</p>\r\n                                <button\r\n                                    onClick={() => window.location.href = '/dashboard'}\r\n                                    className=\"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition duration-200\"\r\n                                >\r\n                                    Find Matches\r\n                                </button>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"space-y-3\">\r\n                                {matches.map((match, index) => (\r\n                                    <div\r\n                                        key={index}\r\n                                        onClick={() => handleSelectMatch(match)}\r\n                                        className={`p-3 rounded-lg cursor-pointer transition duration-200 ${\r\n                                            selectedMatch?.userId._id === match.userId._id\r\n                                                ? 'bg-purple-100 border-2 border-purple-300'\r\n                                                : 'hover:bg-gray-100'\r\n                                        }`}\r\n                                    >\r\n                                        <div className=\"flex items-center space-x-3\">\r\n                                            <div className=\"flex items-center justify-center w-12 h-12 overflow-hidden bg-gray-200 rounded-full\">\r\n                                                {match.userId.photos && match.userId.photos.length > 0 ? (\r\n                                                    <img\r\n                                                        src={match.userId.photos.find(p => p.isMain)?.url || match.userId.photos[0].url}\r\n                                                        alt={match.userId.firstName}\r\n                                                        className=\"object-cover w-full h-full\"\r\n                                                    />\r\n                                                ) : (\r\n                                                    <span className=\"text-2xl\">üë§</span>\r\n                                                )}\r\n                                            </div>\r\n                                            <div className=\"flex-1\">\r\n                                                <h3 className=\"font-semibold\">\r\n                                                    {match.userId.firstName} {match.userId.lastName}\r\n                                                </h3>\r\n                                                <p className=\"text-sm text-gray-500\">{match.userId.major}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Main Chat Area */}\r\n                <div className={`${\r\n                    !showSidebar ? 'block' : 'hidden'\r\n                } md:block flex flex-col flex-1`}>\r\n                    {selectedMatch ? (\r\n                        <>\r\n                            {/* Chat Header with Back Button */}\r\n                            <div className=\"flex items-center p-3 sm:p-4 space-x-3 bg-white border-b\">\r\n                                {/* Mobile Back Button */}\r\n                                <button\r\n                                    onClick={handleBackToMatches}\r\n                                    className=\"md:hidden flex items-center justify-center w-8 h-8 text-blue-500 hover:bg-blue-50 rounded-full transition duration-200\"\r\n                                >\r\n                                    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15 19l-7-7 7-7\"></path>\r\n                                    </svg>\r\n                                </button>\r\n                                \r\n                                <div className=\"flex items-center justify-center w-8 h-8 sm:w-10 sm:h-10 overflow-hidden bg-gray-200 rounded-full\">\r\n                                    {selectedMatch.userId.photos && selectedMatch.userId.photos.length > 0 ? (\r\n                                        <img\r\n                                            src={selectedMatch.userId.photos.find(p => p.isMain)?.url || selectedMatch.userId.photos[0].url}\r\n                                            alt={selectedMatch.userId.firstName}\r\n                                            className=\"object-cover w-full h-full\"\r\n                                        />\r\n                                    ) : (\r\n                                        <span className=\"text-lg sm:text-xl\">üë§</span>\r\n                                    )}\r\n                                </div>\r\n                                <div>\r\n                                    <h3 className=\"text-sm sm:text-lg font-semibold\">\r\n                                        {selectedMatch.userId.firstName} {selectedMatch.userId.lastName}\r\n                                    </h3>\r\n                                    <p className=\"text-xs sm:text-sm text-gray-500\">\r\n                                        {selectedMatch.userId.major} ‚Ä¢ {selectedMatch.userId.year}\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Messages Area */}\r\n                            <div className=\"flex-1 p-3 sm:p-4 space-y-3 sm:space-y-4 overflow-y-auto bg-gradient-to-b from-blue-50 to-purple-50\">\r\n                                {messages.length === 0 ? (\r\n                                    <div className=\"py-8 text-center text-gray-700\">\r\n                                        <div className=\"mb-4 text-4xl sm:text-6xl\">üí¨</div>\r\n                                        <h3 className=\"mb-2 text-lg sm:text-xl font-semibold\">Start the conversation!</h3>\r\n                                        <p className=\"text-sm sm:text-base\">You matched with {selectedMatch.userId.firstName}. Say hello!</p>\r\n                                    </div>\r\n                                ) : (\r\n                                    messages.map((message, index) => (\r\n                                        <div\r\n                                            key={message._id || index}\r\n                                            className={`flex ${message.sender._id === currentUser.id ? 'justify-end' : 'justify-start'}`}\r\n                                        >\r\n                                            <div\r\n                                                className={`max-w-xs sm:max-w-sm lg:max-w-md px-3 sm:px-4 py-2 rounded-lg ${\r\n                                                    message.sender._id === currentUser.id\r\n                                                        ? 'bg-purple-500 text-white'\r\n                                                        : 'bg-white text-gray-800 shadow-md'\r\n                                                }`}\r\n                                            >\r\n                                                <p className=\"text-sm sm:text-base\">{message.content}</p>\r\n                                                <div className=\"flex items-center justify-between mt-1\">\r\n                                                    <p className={`text-xs ${\r\n                                                        message.sender._id === currentUser.id ? 'text-purple-200' : 'text-gray-500'\r\n                                                    }`}>\r\n                                                        {new Date(message.createdAt).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n                                                    </p>\r\n                                                    {message.sender._id === currentUser.id && (\r\n                                                        <span className={`text-xs ml-2 ${message.isRead ? 'text-purple-200' : 'text-purple-300'}`}>\r\n                                                            {message.isRead ? '‚úì‚úì' : '‚úì'}\r\n                                                        </span>\r\n                                                    )}\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    ))\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Message Input */}\r\n                            <div className=\"p-3 sm:p-4 bg-white border-t\">\r\n                                <form onSubmit={sendMessage} className=\"flex space-x-2\">\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={newMessage}\r\n                                        onChange={(e) => setNewMessage(e.target.value)}\r\n                                        placeholder={`Message ${selectedMatch.userId.firstName}...`}\r\n                                        className=\"flex-1 p-2 sm:p-3 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\r\n                                    />\r\n                                    <button\r\n                                        type=\"submit\"\r\n                                        disabled={!newMessage.trim()}\r\n                                        className=\"px-4 sm:px-6 py-2 sm:py-3 text-sm sm:text-base text-white transition duration-200 bg-purple-500 rounded-lg hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                                    >\r\n                                        Send\r\n                                    </button>\r\n                                </form>\r\n                            </div>\r\n                        </>\r\n                    ) : (\r\n                        <div className=\"flex items-center justify-center flex-1 text-gray-700\">\r\n                            <div className=\"text-center p-4\">\r\n                                <div className=\"mb-4 text-6xl sm:text-8xl\">üí¨</div>\r\n                                <h2 className=\"mb-2 text-xl sm:text-2xl font-bold\">Select a match to start chatting</h2>\r\n                                <p className=\"text-sm sm:text-lg\">Choose someone from your matches to begin a conversation</p>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Messages;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}