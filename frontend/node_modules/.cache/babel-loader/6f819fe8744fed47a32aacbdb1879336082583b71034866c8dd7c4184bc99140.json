{"ast":null,"code":"var _jsxFileName = \"D:\\\\UohDating\\\\university-dating-app\\\\frontend\\\\src\\\\components\\\\Messages.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport io from 'socket.io-client';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Messages = () => {\n  _s();\n  var _selectedMatch$userId;\n  const {\n    userId\n  } = useParams();\n  const [matches, setMatches] = useState([]);\n  const [selectedMatch, setSelectedMatch] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [socket, setSocket] = useState(null);\n  const [currentUser, setCurrentUser] = useState(null);\n  useEffect(() => {\n    const user = JSON.parse(localStorage.getItem('user') || '{}');\n    setCurrentUser(user);\n\n    // Initialize socket connection\n    const newSocket = io('http://localhost:5000');\n    setSocket(newSocket);\n    newSocket.emit('join', user.id);\n    newSocket.on('receive_message', message => {\n      setMessages(prev => [...prev, message]);\n    });\n    fetchMatches();\n    return () => newSocket.close();\n  }, []);\n  useEffect(() => {\n    if (userId && matches.length > 0) {\n      const match = matches.find(m => m.userId._id === userId);\n      if (match) {\n        setSelectedMatch(match);\n        fetchMessages(userId);\n      }\n    }\n  }, [userId, matches]);\n  const fetchMatches = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.get('http://localhost:5000/api/user/matches', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setMatches(response.data);\n      setLoading(false);\n    } catch (error) {\n      console.error('Matches fetch error:', error);\n      setLoading(false);\n    }\n  };\n  const fetchMessages = async otherUserId => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.get(`http://localhost:5000/api/messages/${otherUserId}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setMessages(response.data);\n    } catch (error) {\n      var _error$response;\n      console.error('Messages fetch error:', error);\n      if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 403) {\n        alert('You can only message matched users');\n      }\n    }\n  };\n  const sendMessage = async e => {\n    e.preventDefault();\n    if (!newMessage.trim() || !selectedMatch) return;\n    try {\n      const token = localStorage.getItem('token');\n      const messageData = {\n        receiverId: selectedMatch.userId._id,\n        content: newMessage.trim(),\n        messageType: 'text'\n      };\n      const response = await axios.post('http://localhost:5000/api/messages', messageData, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setMessages(prev => [...prev, response.data]);\n\n      // Emit to socket for real-time\n      socket.emit('send_message', {\n        ...response.data,\n        receiverId: selectedMatch.userId._id\n      });\n      setNewMessage('');\n    } catch (error) {\n      var _error$response2;\n      console.error('Send message error:', error);\n      if (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) === 403) {\n        alert('You can only message matched users');\n      } else {\n        alert('Failed to send message');\n      }\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center min-h-screen bg-gradient-to-r from-blue-400 to-purple-400\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center text-white\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-12 h-12 mx-auto mb-4 border-b-2 border-white rounded-full animate-spin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-xl\",\n          children: \"Loading messages...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-r from-blue-400 to-purple-400\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex h-screen\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-1/3 overflow-y-auto bg-white border-r\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 border-b bg-gradient-to-r from-blue-500 to-purple-500\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-bold text-white\",\n            children: \"Messages\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => window.location.href = '/dashboard',\n            className: \"mt-1 text-sm text-white hover:underline\",\n            children: \"\\u2190 Back to Dashboard\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4\",\n          children: matches.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"py-8 text-center text-gray-500\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-2 text-4xl\",\n              children: \"\\uD83D\\uDCAC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"No matches to message yet\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-3\",\n            children: matches.map((match, index) => {\n              var _match$userId$photos$;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: () => {\n                  setSelectedMatch(match);\n                  fetchMessages(match.userId._id);\n                  window.history.pushState(null, '', `/messages/${match.userId._id}`);\n                },\n                className: `p-3 rounded-lg cursor-pointer transition duration-200 ${(selectedMatch === null || selectedMatch === void 0 ? void 0 : selectedMatch.userId._id) === match.userId._id ? 'bg-purple-100 border-2 border-purple-300' : 'hover:bg-gray-100'}`,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-center w-12 h-12 overflow-hidden bg-gray-200 rounded-full\",\n                    children: match.userId.photos && match.userId.photos.length > 0 ? /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: ((_match$userId$photos$ = match.userId.photos.find(p => p.isMain)) === null || _match$userId$photos$ === void 0 ? void 0 : _match$userId$photos$.url) || match.userId.photos[0].url,\n                      alt: match.userId.firstName,\n                      className: \"object-cover w-full h-full\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 160,\n                      columnNumber: 53\n                    }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-2xl\",\n                      children: \"\\uD83D\\uDC64\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 166,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 158,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex-1\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                      className: \"font-semibold\",\n                      children: [match.userId.firstName, \" \", match.userId.lastName]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 170,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm text-gray-500\",\n                      children: match.userId.major\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 173,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 169,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 157,\n                  columnNumber: 41\n                }, this)\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 37\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col flex-1\",\n        children: selectedMatch ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center p-4 space-x-3 bg-white border-b\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-center w-10 h-10 overflow-hidden bg-gray-200 rounded-full\",\n              children: selectedMatch.userId.photos && selectedMatch.userId.photos.length > 0 ? /*#__PURE__*/_jsxDEV(\"img\", {\n                src: ((_selectedMatch$userId = selectedMatch.userId.photos.find(p => p.isMain)) === null || _selectedMatch$userId === void 0 ? void 0 : _selectedMatch$userId.url) || selectedMatch.userId.photos[0].url,\n                alt: selectedMatch.userId.firstName,\n                className: \"object-cover w-full h-full\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 41\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xl\",\n                children: \"\\uD83D\\uDC64\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-lg font-semibold\",\n                children: [selectedMatch.userId.firstName, \" \", selectedMatch.userId.lastName]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-500\",\n                children: [selectedMatch.userId.major, \" \\u2022 \", selectedMatch.userId.year]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1 p-4 space-y-4 overflow-y-auto\",\n            children: messages.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"py-8 text-center text-white\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-4 text-6xl\",\n                children: \"\\uD83D\\uDCAC\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"mb-2 text-xl font-semibold\",\n                children: \"Start the conversation!\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"You matched with \", selectedMatch.userId.firstName, \". Say hello!\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 37\n            }, this) : messages.map((message, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `flex ${message.sender._id === currentUser.id ? 'justify-end' : 'justify-start'}`,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${message.sender._id === currentUser.id ? 'bg-purple-500 text-white' : 'bg-white text-gray-800'}`,\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: message.content\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 228,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center justify-between\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: `text-xs mt-1 ${message.sender._id === currentUser.id ? 'text-purple-200' : 'text-gray-500'}`,\n                    children: new Date(message.createdAt).toLocaleTimeString([], {\n                      hour: '2-digit',\n                      minute: '2-digit'\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 230,\n                    columnNumber: 53\n                  }, this), message.sender._id === currentUser.id && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `text-xs ${message.isRead ? 'text-purple-200' : 'text-purple-300'}`,\n                    children: message.isRead ? '‚úì‚úì' : '‚úì'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 235,\n                    columnNumber: 57\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 45\n              }, this)\n            }, message._id || index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 41\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 bg-white border-t\",\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: sendMessage,\n              className: \"flex space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: newMessage,\n                onChange: e => setNewMessage(e.target.value),\n                placeholder: `Message ${selectedMatch.userId.firstName}...`,\n                className: \"flex-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 249,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                disabled: !newMessage.trim(),\n                className: \"px-6 py-3 text-white transition duration-200 bg-purple-500 rounded-lg hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed\",\n                children: \"Send\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-center flex-1 text-white\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-4 text-8xl\",\n              children: \"\\uD83D\\uDCAC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"mb-2 text-2xl font-bold\",\n              children: \"Select a match to start chatting\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-lg\",\n              children: \"Choose someone from your matches to begin a conversation\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 9\n  }, this);\n};\n_s(Messages, \"iFUP+/q/6PE4QUtnluT16qrvA7o=\", false, function () {\n  return [useParams];\n});\n_c = Messages;\nexport default Messages;\nvar _c;\n$RefreshReg$(_c, \"Messages\");","map":{"version":3,"names":["React","useState","useEffect","useParams","axios","io","jsxDEV","_jsxDEV","Fragment","_Fragment","Messages","_s","_selectedMatch$userId","userId","matches","setMatches","selectedMatch","setSelectedMatch","messages","setMessages","newMessage","setNewMessage","loading","setLoading","socket","setSocket","currentUser","setCurrentUser","user","JSON","parse","localStorage","getItem","newSocket","emit","id","on","message","prev","fetchMatches","close","length","match","find","m","_id","fetchMessages","token","response","get","headers","Authorization","data","error","console","otherUserId","_error$response","status","alert","sendMessage","e","preventDefault","trim","messageData","receiverId","content","messageType","post","_error$response2","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","window","location","href","map","index","_match$userId$photos$","history","pushState","photos","src","p","isMain","url","alt","firstName","lastName","major","year","sender","Date","createdAt","toLocaleTimeString","hour","minute","isRead","onSubmit","type","value","onChange","target","placeholder","disabled","_c","$RefreshReg$"],"sources":["D:/UohDating/university-dating-app/frontend/src/components/Messages.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport io from 'socket.io-client';\r\n\r\nconst Messages = () => {\r\n    const { userId } = useParams();\r\n    const [matches, setMatches] = useState([]);\r\n    const [selectedMatch, setSelectedMatch] = useState(null);\r\n    const [messages, setMessages] = useState([]);\r\n    const [newMessage, setNewMessage] = useState('');\r\n    const [loading, setLoading] = useState(true);\r\n    const [socket, setSocket] = useState(null);\r\n    const [currentUser, setCurrentUser] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const user = JSON.parse(localStorage.getItem('user') || '{}');\r\n        setCurrentUser(user);\r\n\r\n        // Initialize socket connection\r\n        const newSocket = io('http://localhost:5000');\r\n        setSocket(newSocket);\r\n\r\n        newSocket.emit('join', user.id);\r\n\r\n        newSocket.on('receive_message', (message) => {\r\n            setMessages(prev => [...prev, message]);\r\n        });\r\n\r\n        fetchMatches();\r\n\r\n        return () => newSocket.close();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (userId && matches.length > 0) {\r\n            const match = matches.find(m => m.userId._id === userId);\r\n            if (match) {\r\n                setSelectedMatch(match);\r\n                fetchMessages(userId);\r\n            }\r\n        }\r\n    }, [userId, matches]);\r\n\r\n    const fetchMatches = async () => {\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            const response = await axios.get('http://localhost:5000/api/user/matches', {\r\n                headers: { Authorization: `Bearer ${token}` }\r\n            });\r\n            setMatches(response.data);\r\n            setLoading(false);\r\n        } catch (error) {\r\n            console.error('Matches fetch error:', error);\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const fetchMessages = async (otherUserId) => {\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            const response = await axios.get(`http://localhost:5000/api/messages/${otherUserId}`, {\r\n                headers: { Authorization: `Bearer ${token}` }\r\n            });\r\n            setMessages(response.data);\r\n        } catch (error) {\r\n            console.error('Messages fetch error:', error);\r\n            if (error.response?.status === 403) {\r\n                alert('You can only message matched users');\r\n            }\r\n        }\r\n    };\r\n\r\n    const sendMessage = async (e) => {\r\n        e.preventDefault();\r\n        if (!newMessage.trim() || !selectedMatch) return;\r\n\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            const messageData = {\r\n                receiverId: selectedMatch.userId._id,\r\n                content: newMessage.trim(),\r\n                messageType: 'text'\r\n            };\r\n\r\n            const response = await axios.post('http://localhost:5000/api/messages', messageData, {\r\n                headers: { Authorization: `Bearer ${token}` }\r\n            });\r\n\r\n            setMessages(prev => [...prev, response.data]);\r\n\r\n            // Emit to socket for real-time\r\n            socket.emit('send_message', {\r\n                ...response.data,\r\n                receiverId: selectedMatch.userId._id\r\n            });\r\n\r\n            setNewMessage('');\r\n        } catch (error) {\r\n            console.error('Send message error:', error);\r\n            if (error.response?.status === 403) {\r\n                alert('You can only message matched users');\r\n            } else {\r\n                alert('Failed to send message');\r\n            }\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex items-center justify-center min-h-screen bg-gradient-to-r from-blue-400 to-purple-400\">\r\n                <div className=\"text-center text-white\">\r\n                    <div className=\"w-12 h-12 mx-auto mb-4 border-b-2 border-white rounded-full animate-spin\"></div>\r\n                    <p className=\"text-xl\">Loading messages...</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gradient-to-r from-blue-400 to-purple-400\">\r\n            <div className=\"flex h-screen\">\r\n\r\n                {/* Sidebar - Matches List */}\r\n                <div className=\"w-1/3 overflow-y-auto bg-white border-r\">\r\n                    <div className=\"p-4 border-b bg-gradient-to-r from-blue-500 to-purple-500\">\r\n                        <h2 className=\"text-xl font-bold text-white\">Messages</h2>\r\n                        <button\r\n                            onClick={() => window.location.href = '/dashboard'}\r\n                            className=\"mt-1 text-sm text-white hover:underline\"\r\n                        >\r\n                            ‚Üê Back to Dashboard\r\n                        </button>\r\n                    </div>\r\n\r\n                    <div className=\"p-4\">\r\n                        {matches.length === 0 ? (\r\n                            <div className=\"py-8 text-center text-gray-500\">\r\n                                <div className=\"mb-2 text-4xl\">üí¨</div>\r\n                                <p>No matches to message yet</p>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"space-y-3\">\r\n                                {matches.map((match, index) => (\r\n                                    <div\r\n                                        key={index}\r\n                                        onClick={() => {\r\n                                            setSelectedMatch(match);\r\n                                            fetchMessages(match.userId._id);\r\n                                            window.history.pushState(null, '', `/messages/${match.userId._id}`);\r\n                                        }}\r\n                                        className={`p-3 rounded-lg cursor-pointer transition duration-200 ${selectedMatch?.userId._id === match.userId._id\r\n                                                ? 'bg-purple-100 border-2 border-purple-300'\r\n                                                : 'hover:bg-gray-100'\r\n                                            }`}\r\n                                    >\r\n                                        <div className=\"flex items-center space-x-3\">\r\n                                            <div className=\"flex items-center justify-center w-12 h-12 overflow-hidden bg-gray-200 rounded-full\">\r\n                                                {match.userId.photos && match.userId.photos.length > 0 ? (\r\n                                                    <img\r\n                                                        src={match.userId.photos.find(p => p.isMain)?.url || match.userId.photos[0].url}\r\n                                                        alt={match.userId.firstName}\r\n                                                        className=\"object-cover w-full h-full\"\r\n                                                    />\r\n                                                ) : (\r\n                                                    <span className=\"text-2xl\">üë§</span>\r\n                                                )}\r\n                                            </div>\r\n                                            <div className=\"flex-1\">\r\n                                                <h3 className=\"font-semibold\">\r\n                                                    {match.userId.firstName} {match.userId.lastName}\r\n                                                </h3>\r\n                                                <p className=\"text-sm text-gray-500\">{match.userId.major}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Main Chat Area */}\r\n                <div className=\"flex flex-col flex-1\">\r\n                    {selectedMatch ? (\r\n                        <>\r\n                            {/* Chat Header */}\r\n                            <div className=\"flex items-center p-4 space-x-3 bg-white border-b\">\r\n                                <div className=\"flex items-center justify-center w-10 h-10 overflow-hidden bg-gray-200 rounded-full\">\r\n                                    {selectedMatch.userId.photos && selectedMatch.userId.photos.length > 0 ? (\r\n                                        <img\r\n                                            src={selectedMatch.userId.photos.find(p => p.isMain)?.url || selectedMatch.userId.photos[0].url}\r\n                                            alt={selectedMatch.userId.firstName}\r\n                                            className=\"object-cover w-full h-full\"\r\n                                        />\r\n                                    ) : (\r\n                                        <span className=\"text-xl\">üë§</span>\r\n                                    )}\r\n                                </div>\r\n                                <div>\r\n                                    <h3 className=\"text-lg font-semibold\">\r\n                                        {selectedMatch.userId.firstName} {selectedMatch.userId.lastName}\r\n                                    </h3>\r\n                                    <p className=\"text-sm text-gray-500\">{selectedMatch.userId.major} ‚Ä¢ {selectedMatch.userId.year}</p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Messages Area */}\r\n                            <div className=\"flex-1 p-4 space-y-4 overflow-y-auto\">\r\n                                {messages.length === 0 ? (\r\n                                    <div className=\"py-8 text-center text-white\">\r\n                                        <div className=\"mb-4 text-6xl\">üí¨</div>\r\n                                        <h3 className=\"mb-2 text-xl font-semibold\">Start the conversation!</h3>\r\n                                        <p>You matched with {selectedMatch.userId.firstName}. Say hello!</p>\r\n                                    </div>\r\n                                ) : (\r\n                                    messages.map((message, index) => (\r\n                                        <div\r\n                                            key={message._id || index}\r\n                                            className={`flex ${message.sender._id === currentUser.id ? 'justify-end' : 'justify-start'}`}\r\n                                        >\r\n                                            <div\r\n                                                className={`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${message.sender._id === currentUser.id\r\n                                                        ? 'bg-purple-500 text-white'\r\n                                                        : 'bg-white text-gray-800'\r\n                                                    }`}\r\n                                            >\r\n                                                <p>{message.content}</p>\r\n                                                <div className=\"flex items-center justify-between\">\r\n                                                    <p className={`text-xs mt-1 ${message.sender._id === currentUser.id ? 'text-purple-200' : 'text-gray-500'\r\n                                                        }`}>\r\n                                                        {new Date(message.createdAt).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n                                                    </p>\r\n                                                    {message.sender._id === currentUser.id && (\r\n                                                        <span className={`text-xs ${message.isRead ? 'text-purple-200' : 'text-purple-300'}`}>\r\n                                                            {message.isRead ? '‚úì‚úì' : '‚úì'}\r\n                                                        </span>\r\n                                                    )}\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    ))\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Message Input */}\r\n                            <div className=\"p-4 bg-white border-t\">\r\n                                <form onSubmit={sendMessage} className=\"flex space-x-2\">\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={newMessage}\r\n                                        onChange={(e) => setNewMessage(e.target.value)}\r\n                                        placeholder={`Message ${selectedMatch.userId.firstName}...`}\r\n                                        className=\"flex-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\r\n                                    />\r\n                                    <button\r\n                                        type=\"submit\"\r\n                                        disabled={!newMessage.trim()}\r\n                                        className=\"px-6 py-3 text-white transition duration-200 bg-purple-500 rounded-lg hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                                    >\r\n                                        Send\r\n                                    </button>\r\n                                </form>\r\n                            </div>\r\n                        </>\r\n                    ) : (\r\n                        <div className=\"flex items-center justify-center flex-1 text-white\">\r\n                            <div className=\"text-center\">\r\n                                <div className=\"mb-4 text-8xl\">üí¨</div>\r\n                                <h2 className=\"mb-2 text-2xl font-bold\">Select a match to start chatting</h2>\r\n                                <p className=\"text-lg\">Choose someone from your matches to begin a conversation</p>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Messages;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}